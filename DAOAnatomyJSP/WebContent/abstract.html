<!DOCTYPE html>

<html lang="en">

<head>
  <title>JSP - ANATOMY STUFF</title>

  <script type="text/javascript" src="./scripts/jsTree.v.1.0rc2/_lib/jquery.js"></script>
  <script type="text/javascript" src="./scripts/jsTree.v.1.0rc2/_lib/jquery.hotkeys.js"></script>
  <script type="text/javascript" src="./scripts/jsTree.v.1.0rc2/jquery.cookie.js"></script>
  <script type="text/javascript" src="./scripts/jsTree.v.1.0rc2/jquery.jstree.js"></script>
  <script type="text/javascript" src="./scripts/jsTree.v.1.0rc2/jquery.jstree.extra.js"></script>

  <link type="text/css" rel="stylesheet" href="./css/global.css">

  <style type="text/css">
    #tree {
      font-family: Verdana, helvetica, arial, sans-serif;
      font-size: 100%;
    }
  </style>

  <script type="text/javascript" src="./scripts/buildPaths.js"></script>
  
  <script type="text/javascript">
	/*
	 * Build the initial JsTree
	 */ 
  $(function () {
	    $("#tree").jstree({ 
		    "json_data" : {
			    "data" : [
				    {
				    	"data" : "Anatomy",
					    "attr" : { 
					    	"id" : "li.node.BASE.Abstract.id0", 
			                "ext_id" : "EMAPA:0",
					    	"name" : "Anatomy",
  				    	    "start" : "TS01",
							"end" : "TS28"
					    },
					    "children": [{
                            "attr": {
                                 "ext_id": "EMAPA:25765", 
                                 "id": "li.node.BRANCH.Abstract.id33", 
                                 "name": "mouse",
       				    	     "start" : "TS01",
    							 "end" : "TS28"
                             },
                             "data": "mouse"
                        }
					    ],
					    "state" : "open"
				    }
			    ],
			    
			    "progressive_render" : true,
		    },
		    "contextmenu" : {
		    	"items" : createDefaultMenu 
		    },
		    "plugins": [
		        "themes", 
		        "json_data", 
		        "ui",
		        "contextmenu"
		    ]
  	})
  	.bind("select_node.jstree", function (event, data) {
		popUpAbstractDetails( data.rslt.obj );
    })
  });
  
    /*
     * Create the Right Click Menu for each item in the Tree
     */
    function createDefaultMenu(obj){
		
		var arrayStr = obj.attr("id").split(".");
    	var nodeType = arrayStr[2];
    	var treeType = arrayStr[3];

    	var stageSeq = "0";
    	var emapId = "";
		
        //alert("Tree Type = " + treeType + "\nnodeType = " + nodeType); 

    	if ( nodeType == "BRANCH") {
    	    return {
                "Expand" : {
            	    label : "Expand Branch",
	            	action: function (obj) {
	                	addAbstractSubTree(obj);
		            },
                	"seperator_after" : false,
            	    "seperator_before" : false
                }
    	    }
    	}
    	
    }
    
  </script>

</head>

<body>

  <h1>JAVASCRIPT - ANATOMY STUFF - ABSTRACT</h1>
  
  <fieldset>
  
  <legend>Browse Anatomy Tree .... Javascript</legend>
  <br />
  
  <p><a href="javascript.html">BACK</a></p>

  <div id="tree"></div>

  <br />
  
  </fieldset>

</body>

</html>
