<!DOCTYPE html>

<html lang="en">

<head>
  <title>JSP - ANATOMY STUFF</title>

  <script type="text/javascript" src="./scripts/jstree_pre1/_lib/jquery-1.7.1.js"></script>
  <script type="text/javascript" src="./scripts/jstree_pre1/_lib/jquery.cookie.js"></script>
  <script type="text/javascript" src="./scripts/jstree_pre1/_lib/jquery.hotkeys.js"></script>
  <script type="text/javascript" src="./scripts/jstree_pre1/jquery.jstree.js"></script>
  <script type="text/javascript" src="./scripts/jstree_pre1/_docs/syntax/!script.js"></script>

  <link type="text/css" rel="stylesheet" href="./css/global.css">

  <style type="text/css">
    #tree {
      font-family: Verdana, helvetica, arial, sans-serif;
      font-size: 100%;
    }
  </style>

  <script type="text/javascript" src="./scripts/buildPaths.js"></script>
  
  <script type="text/javascript">
	/*
	 * Build the initial JsTree
	 */ 
  $(function () {
	    $("#tree").jstree({ 
		    "json_data" : {
			    "data" : [
				    {
				    	"data" : "Anatomy",
					    "attr" : { 
					    	"id" : "li.node.BASE.Timed.id0", 
			                "ext_id" : "EMAP:0",
					    	"name" : "Anatomy",
  				    	    "stage" : "TS09"
					    },
					    "children": [{
                            "attr": {
                                 "ext_id": "EMAP:25774", 
                                 "id": "li.node.BRANCH.Timed.id42", 
                                 "name": "mouse",
       				    	     "stage" : "TS09"
                             },
                             "data": "mouse"
                        }
					    ],
					    "state" : "open"
				    }
			    ],
			    
			    "progressive_render" : true,
		    },
		    "contextmenu" : {
		    	"items" : createDefaultMenu 
		    },
		    "plugins": [
		        "themes", 
		        "json_data", 
		        "ui",
		        "contextmenu"
		    ]
  	})
  	.bind("select_node.jstree", function (event, data) {
		popUpDetails( "8", data.rslt.obj );
    })
  });
  
    /*
     * Create the Right Click Menu for each item in the Tree
     */
    function createDefaultMenu(obj){
		
		var arrayStr = obj.attr("id").split(".");
    	var nodeType = arrayStr[2];
    	var treeType = arrayStr[3];

    	var stageSeq = "8";
    	var emapId = "";
		
        //alert("Tree Type = " + treeType + "\nnodeType = " + nodeType); 

    	if ( nodeType == "BRANCH") {
    	    return {
                "Expand" : {
            	    label : "Expand Branch",
	            	action: function (obj) {
	                	if ( treeType == "Abstract" ) {
	                		emapId = addEmapId(stageSeq, obj);
		                 	//alert("Tree Type = " + treeType + "; emapId = " + emapId); 
	                		addSubTree("TS09", emapId, obj);
	                	}
	                	if ( treeType == "Timed" ) {
	                    	var emapId = obj.attr("ext_id");
	                    	//var arrayEmap = publicEmapId.split(":");
	                    	//var publicEmapId = arrayEmap[1];
		                 	//alert("Tree Type = " + treeType + "; emapId = " + emapId); 
	                		addSubTree("TS09", emapId, obj);
	                	}
		            },
                	"seperator_after" : false,
            	    "seperator_before" : false
                }
    	    }
    	}
    	
    }
    
  </script>

</head>

<body>

  <h1>JAVASCRIPT - ANATOMY STUFF - TS09</h1>
  
  <fieldset>
  
  <legend>Browse TS09 Anatomy Tree .... Javascript</legend>
  <br />
  
  <p><a href="javascript.html">BACK</a></p>

  <div id="tree"></div>

  <br />
  
  </fieldset>

</body>

</html>
